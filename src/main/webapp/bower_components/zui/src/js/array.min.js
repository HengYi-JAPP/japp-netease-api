(function(){"use strict";var STR_FUNCTION="function";if(!Array.prototype.forEach){Array.prototype.forEach=function(fun){var len=this.length;if(typeof fun!=STR_FUNCTION)throw new TypeError;var thisp=arguments[1];for(var i=0;i<len;i++){if(i in this){fun.call(thisp,this[i],i,this)}}}}if(!Array.isArray){Array.isArray=function(obj){return Object.toString.call(obj)==="[object Array]"}}if(!Array.prototype.lastIndexOf){Array.prototype.lastIndexOf=function(elt){var len=this.length;var from=Number(arguments[1]);if(isNaN(from)){from=len-1}else{from=from<0?Math.ceil(from):Math.floor(from);if(from<0)from+=len;else if(from>=len)from=len-1}for(;from>-1;from--){if(from in this&&this[from]===elt)return from}return-1}}if(!Array.prototype.every){Array.prototype.every=function(fun){var len=this.length;if(typeof fun!=STR_FUNCTION)throw new TypeError;var thisp=arguments[1];for(var i=0;i<len;i++){if(i in this&&!fun.call(thisp,this[i],i,this))return false}return true}}if(!Array.prototype.filter){Array.prototype.filter=function(fun){var len=this.length;if(typeof fun!=STR_FUNCTION)throw new TypeError;var res=[];var thisp=arguments[1];for(var i=0;i<len;i++){if(i in this){var val=this[i];if(fun.call(thisp,val,i,this))res.push(val)}}return res}}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(elt){var len=this.length;var from=Number(arguments[1])||0;from=from<0?Math.ceil(from):Math.floor(from);if(from<0)from+=len;for(;from<len;from++){if(from in this&&this[from]===elt)return from}return-1}}if(!Array.prototype.map){Array.prototype.map=function(fun){var len=this.length;if(typeof fun!=STR_FUNCTION)throw new TypeError;var res=new Array(len);var thisp=arguments[1];for(var i=0;i<len;i++){if(i in this)res[i]=fun.call(thisp,this[i],i,this)}return res}}if(!Array.prototype.where){Array.prototype.where=function(conditions,result){result=result||[];var cdt,ok,objVal;this.forEach(function(val){ok=true;for(var key in conditions){cdt=conditions[key];if(typeof cdt===STR_FUNCTION){ok=cdt(val)}else{objVal=val[key];ok=objVal&&objVal===cdt}if(!ok)break}if(ok)result.push(val)});return result}}if(!Array.prototype.groupBy){Array.prototype.groupBy=function(key){var result={};this.forEach(function(val){var keyName=val[key];if(!keyName){keyName="unkown"}if(!result[keyName]){result[keyName]=[]}result[keyName].push(val)});return result}}if(!Array.prototype.has){Array.prototype.has=function(conditions){var result=false,cdt,ok,objVal;this.forEach(function(val){ok=true;for(var key in conditions){cdt=conditions[key];if(typeof cdt===STR_FUNCTION){ok=cdt(val)}else{objVal=val[key];ok=objVal&&objVal===cdt}if(!ok)break}if(ok){result=true;return false}});return result}}})();